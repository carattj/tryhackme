# Basic Pentesting
# https://tryhackme.com/room/basicpentestingjt

## Port scan
Scan with nmap all the open services, and save the scan result in the nmap_scan.txt file:

nmap -sC -sV -oN nmap_scan.txt <ip_address>

There are 6 open ports.

## HTTP
The port we are now more interested in is the http port 80. Therefore, we go to the web page <ip_address>:80, but we obtain:

web_browser.png

By inspecting the page, we discover there could be hidden pages. So, we brute force them by using gobuster. We use one of the wordlist that Kali linux offers by default.

gobuster -w /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-small.txt -o gobuster_scan.txt

I found the hidden /development page, where we have access to an Apache/2.4.18 server. Here, we can view the two files dev.txt and j.txt.

## SMB
SMB services are running on 139 and 445 ports, I enumerate them:

enum4linnux -a <ip_address>

In the output, I get the name of two users of the system: jan and kay. By knowing these usernames, and the fact the password is easy from the j.txt found on the web server, I use brute force.

## Brute force
To brute force the password, I use hydra and one of the many wordlists. The channel through which we are going to create the connection is ssh.
Since we know the username, we use lowercase l. If we would like to specify an username file, we would have used capital L.

hydra -l jan -P /usr/share/wordlists/rockyou.txt

I get a match, the password is 'armando'.

## ssh
Now that I got the credential jan:armando, I could connect to the server:

ssh jan@<ip_address>

I navigate through the filesystem. I switch to kay and list all its file:

ls -la

There's an .ssh directory, where there are 3 interesting files.

## john the ripper
I copy the id_rsa to k_key file to my machine, which contains kay private key. Since the key is encrypted, I decode it using john the ripper tool. To use john, I firstly have to convert the key into a readable hash, therefore I look for the converter:

locate ssh2john
python3 ssh2john.py k_key > k_key_john

Now, I crack it by using rockyou.txt

john --wordlist=rockyou.txt k_key_john

I found that the ssh private key password is 'beeswax'.

Before using the credential key:beeswax together with the private key to log in, I need to change the rights of the private key. Otherwise, it cannot be used to login.

chmod 600 k_key

I log in as kay:

ssh -i k_key kay@<ip_address>

Now, I can read the pass.bak file inside its home directory, which contains the flag to be captured.